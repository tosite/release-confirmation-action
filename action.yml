name: 'release confirmation action'
description: 'This action is used to detect releases from Github pull request labels.'
inputs:
  githubToken:
    description: 'GITHUB_TOKEN'
    default: ${{ github.token }}
  slackWebhook:
    description: 'SLACK_API_TOKEN'
  isDebug:
    description: 'debug mode(=1)'
    default: '0'
  action:
    description: 'entrypoint(merged|released|notify)'
  baseUrl:
    description: ''
    default: "https://api.github.com/repos"
  repo:
    description: 'owner/repo'
    default: "${{ github.repository }}"
  number:
    description: 'pull_request number'
    default: "${{ github.event.pull_request.number }}"
  mergedLabel:
    description: 'after merged label'
    default: 'action-merged'
  releasedLabel:
    description: 'after released label'
    default: 'action-released'
  notifySubject:
    description: ''
    default: 'List of pull requests that have not been released.'
  mention:
    description: ''
    default: 'NULL'
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.action }}
    - ${{ inputs.baseUrl }}
    - ${{ inputs.repo }}
    - ${{ inputs.number }}
    - ${{ inputs.mergedLabel }}
    - ${{ inputs.releasedLabel }}
  env:
    GITHUB_TOKEN: ${{ inputs.githubToken }}
    SLACK_WEBHOOK: ${{ inputs.slackWebhook }}
    DEBUG_MODE: ${{ inputs.isDebug }}
    SUBJECT: ${{ inputs.notifySubject }}
    MENTION: ${{ inputs.mention }}
